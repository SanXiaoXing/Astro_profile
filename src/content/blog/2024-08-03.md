---
title: Obsidian博客使用问题
pubDate: 2024-08-03 20:16
description: Obsidian使用
categories:
  - Astro构建
tags:
  - Astro
mathjax: true
pin: false
inv-tags: blog
catalog: true
---
# 思考

:::success{title="思考"}
深入使用个人构建博客后，为了更加方便地撰写博客，我开始使用 Obsidian 这款软件。Obsidian 能够显著提升我编写博客的便捷性。
然而，由于 Obsidian 的内部链接功能，不仅能让我的博客具有相互的联系，还能让博客内容变得有些杂乱。为了应对这一问题，我记录了一些解决方法。
:::

# 成功案例

:::tip{title="思路"}
自定义 Markdown 渲染器来处理 Obsidian 的反向链接。通过编写自定义的渲染器插件，来忽略链接格式。
:::

1、 确保安装依赖 `unist-util-visit`

```bash
npm install unist-util-visit
```

2.、编写对应的脚本，在构建前处理所有的 Markdown 文件：

```js title="remark-remove-obsidian-links.js"
import { visit } from 'unist-util-visit';

export default function removeObsidianLinks() {
  return (tree) => {
    visit(tree, 'text', (node) => {
      node.value = node.value.replace(/\[\[.*?\]\]/g, '');
    });
  };
}
```

3、更新 Astro 配置，在 `astro.config.msj` 中正确导入文件

```js title='astro.config.mjs'
import { defineConfig } from 'astro/config';
import removeObsidianLinks from './remark-remove-obsidian-links.js'; //正确输入路径

export default defineConfig({
  markdown: {
    remarkPlugins: [removeObsidianLinks],
  },
});
```

4、 重新运行构建命令确保一切正常

```bash
npm run build
```

# 失败案例

## 在 Markdown 文件使用标记反向链接

1、在Markdown 文件中，将反向链接包裹在特定的标记，例如：

```markdown
# 博客文章

博客内容。

<!-- obsidian-link-start -->
[[2024-06-21]]
<!-- obsidian-link-end -->

博客内容。

```

2、创建自定义 Remark 插件

![remark-remove-obsidian-links](https://cdn.jsdelivr.net/gh/SanXiaoXing/Image@main/blog/remark-remove-obsidian-links.js.png)


## 通过 CSS 样式来隐藏 Obsidian 的反向链接

1、**修改 Markdown 文件**：在 Markdown 文件中为 Obsidian 的反向链接添加特定的类名：


```markdown
<span class="obsidian-link">[[2024-06-21]]</span>
```

2、**添加 CSS 样式**：在 CSS 文件中添加样式规则来隐藏这些链接：


```css title='global.css'
.obsidian-link {
	display: none; 
}
```

---
:::warn{title="问题所在"}
使用 CSS 样式隐藏会有一些冗余，当我使用反向链接还需要添加 css 样式比较麻烦。故舍弃
:::

# 总结

通过这次尝试，使用了不同方法进行测试。中间会有很多中情况，比如：依赖安装不上；代理使用不了；构建直接报错等等内容。
但是为了更好的构建整个 Obsidian 博客内容，我认为这次编写插件是非常值得的，也同时让我学习到更多不同的内容。

OK，最后放一张我的构建 Obsidian 的关系图谱吧，哈哈哈哈哈。
![relationship](https://cdn.jsdelivr.net/gh/SanXiaoXing/Image@main/blog/SanXiaoXing_2024-08-03_22-06-31.png)

[[2024-06-21]]